<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>M_attr: attr Interface Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">M_attr
   </div>
   <div id="projectbrief">M_attr module (Fortran)</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="interfaceattr-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">attr Interface Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a75e08908b27fc339b9247b1830980542"><td class="memItemLeft" align="right" valign="top">character(len=:) function, allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceattr.html#a75e08908b27fc339b9247b1830980542">attr_scalar</a> (string, clear_at_end)</td></tr>
<tr class="separator:a75e08908b27fc339b9247b1830980542"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06e7f1d791da826613f323c68d6c0d15"><td class="memItemLeft" align="right" valign="top">character(len=:) function, dimension(:), allocatable&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceattr.html#a06e7f1d791da826613f323c68d6c0d15">attr_matrix</a> (string, clear_at_end, chars)</td></tr>
<tr class="separator:a06e7f1d791da826613f323c68d6c0d15"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h2><a class="anchor" id="autotoc_md0"></a>
NAME</h2>
<p>M_attr(3f) - [M_attr] control text attributes on terminals (LICENSE:MIT)</p>
<h2><a class="anchor" id="autotoc_md1"></a>
SYNOPSIS</h2>
<pre class="fragment">  use M_attr, only : attr, attr_mode, attr_update
</pre><h2><a class="anchor" id="autotoc_md2"></a>
MAJOR FEATURES</h2>
<p>o Add text attributes with an HTML-like syntax using <a class="el" href="interfaceattr.html">attr(3f)</a>. o suppress the escape sequence output with attr_mode(3f). o customize what strings are produced using attr_update(3f).</p>
<h2><a class="anchor" id="autotoc_md3"></a>
DESCRIPTION</h2>
<p>M_attr(3f) is a Fortran module that writes common ANSI escape sequences which control terminal attributes like text color. It is designed to allow the sequences to be suppressed and for the user program to completely customize it &ndash; the user can add, delete and replace the sequences associated with a keyword without changing the code.</p>
<p>Attributes are specified by writing lines with HTML-like structure.</p>
<p>The advantage of the approach of replacing in-band escape sequences with formatting directives contained on each line is that it is easy to turn off when running batch, but more importantly your program can be run in "raw" mode and write a clean text file with the directives in it that can then be read back in by a simple filter program that strips it back to plain text( see app/plain.f90), or displays it to a screen in color(see app/light.f90) or perhaps converts it to another format.</p>
<p>By making each line self-contained by default this can still be done with any arbitrarily selected group of lines from the file.</p>
<p>So in addition to printing colored lines to your screen this module makes it trivial to read specially-formatted data from a file like a message catalog (perhaps with various versions in different languages) and colorize it or display it as plain text using the included <a class="el" href="interfaceattr.html">attr(3f)</a> procedure, for example.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
LIMITATIONS</h2>
<p>o colors are not nestable. o keywords are case-sensitive, o ANSI escape sequences are not universally supported by all terminal emulators; and normally should be suppressed when not going to a tty device. Therefore, you should use M_system::system_istty(3f) or the common Fortran extension ISATTY() to set the default to "plain" instead of "color" when the output file is not a conforming terminal. On basic MSWindows console windows, it is best to use Windows 10+ and/or the Linux mode; you may have to enable ANSI escape sequence mode on MSWindows. It does work as-is with CygWin and MinGW and Putty windows and mintty(1) as tested.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
EXAMPLE</h2>
<pre class="fragment">Sample program

 program demo_M_attr
 use M_attr, only : attr, attr_mode
 implicit none
 character(len=256) :: line
 character(len=*),parameter :: f='( &amp;
 &amp;"   &lt;bo&gt;&lt;w&gt;&lt;G&gt; GREAT: &lt;/G&gt;&lt;/w&gt;&amp;
 &amp;The new value &lt;Y&gt;&lt;b&gt;",f8.4,"&lt;/b&gt;&lt;/Y&gt; is in range"&amp;
 &amp;)'
 real :: value
    write(*,'(a)')&amp;
    &amp;attr('   &lt;r&gt;&lt;W&gt;&lt;bo&gt; ERROR: &lt;/W&gt;red text on a white background&lt;/y&gt;')

    value=3.4567
    write(line,fmt=f) value
    write(*,'(a)')attr(trim(line))

    ! write same string as plain text
    call attr_mode(manner='plain')
    write(*,'(a)')attr(trim(line))

 end program demo_M_attr
</pre><h2><a class="anchor" id="autotoc_md6"></a>
AUTHOR</h2>
<p>John S. Urban, 2020</p>
<h2><a class="anchor" id="autotoc_md7"></a>
LICENSE</h2>
<p>MIT</p>
<h2><a class="anchor" id="autotoc_md8"></a>
SEE ALSO</h2>
<p><a class="el" href="interfaceattr.html">attr(3f)</a>, attr_mode(3f), attr_update(3f)</p>
<p>Related information:</p>
<p>terminfo(3c), termlib(3c), tput(1), reset(1), clear(1), console_codes(4), ECMA-48, <a href="https://en.wikipedia.org/wiki/ANSI_escape_code">https://en.wikipedia.org/wiki/ANSI_escape_code</a> </p>
</div><h2 class="groupheader">Member Function/Subroutine Documentation</h2>
<a id="a06e7f1d791da826613f323c68d6c0d15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06e7f1d791da826613f323c68d6c0d15">&#9670;&nbsp;</a></span>attr_matrix()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">character(len=:) function, dimension(:), allocatable attr::attr_matrix </td>
          <td>(</td>
          <td class="paramtype">character(len=*), dimension(:), intent(in)&#160;</td>
          <td class="paramname"><em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in), optional&#160;</td>
          <td class="paramname"><em>clear_at_end</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">integer, intent(in), optional&#160;</td>
          <td class="paramname"><em>chars</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a75e08908b27fc339b9247b1830980542"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75e08908b27fc339b9247b1830980542">&#9670;&nbsp;</a></span>attr_scalar()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">character(len=:) function, allocatable attr::attr_scalar </td>
          <td>(</td>
          <td class="paramtype">character(len=*), intent(in)&#160;</td>
          <td class="paramname"><em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">logical, intent(in), optional&#160;</td>
          <td class="paramname"><em>clear_at_end</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<h2><a class="anchor" id="autotoc_md9"></a>
NAME</h2>
<p><a class="el" href="interfaceattr.html">attr(3f)</a> - [M_attr] substitute escape sequences for HTML-like syntax in strings (LICENSE:MIT)</p>
<h2><a class="anchor" id="autotoc_md10"></a>
SYNOPSIS</h2>
<pre class="fragment">  function attr(string,clear_at_end) result (expanded)

    ! scalar
    character(len=*),intent(in) :: string
    logical,intent(in),optional :: clear_at_end
    character(len=:),allocatable :: expanded
    ! or array
    character(len=*),intent(in) :: string(:)
    logical,intent(in),optional :: clear_at_end
    character(len=:),allocatable :: expanded(:)
</pre><h2><a class="anchor" id="autotoc_md11"></a>
DESCRIPTION</h2>
<p>Use HTML-like syntax to add attributes to terminal output such as color on devices that recognize ANSI escape sequences.</p>
<h2><a class="anchor" id="autotoc_md12"></a>
OPTIONS</h2>
<p>string input string of form </p><pre class="fragment">            "&lt;attribute_name&gt;string&lt;/attribute_name&gt; ...".

           where the current attributes are color names,
           bold, italic, underline, ...
</pre><p>clear_at_end By default, a sequence to clear all text attributes is sent at the end of the returned text if an escape character appears in the output string. This can be turned off by setting this value to false. Each line being self-contained has advantages when output is filtered with commands such as grep(1). </p>
<h2><a class="anchor" id="autotoc_md13"></a>
KEYWORDS</h2>
<p>primary default keywords</p>
<p>colors: r, red, R, RED g, green, G, GREEN b, blue, B, BLUE m, magenta, M, MAGENTA c, cyan, C, CYAN y, yellow, Y, YELLOW e, ebony, E, EBONY w, white, W, WHITE attributes: it, italic bo, bold un, underline other: clear escape default reset gt lt dual-value (one for color, one for mono): write(*,*)'&lt;ERROR&gt;an error message' write(*,*)'&lt;WARNING&gt;a warning message' write(*,*)'&lt;INFO&gt;an informational message'</p>
<p>By default, if the color mnemonics (ie. the keywords) are uppercase they change the background color. If lowercase, the foreground color. When preceded by a "/" character the attribute is returned to the default.</p>
<p>The "default" keyword is typically used explicitly when clear_at_end=.false, and sets all text attributes to their initial defaults.</p>
<h2><a class="anchor" id="autotoc_md14"></a>
LIMITATIONS</h2>
<p>o colors are not nestable, keywords are case-sensitive, o not all terminals obey the sequences. On Windows, it is best if you use Windows 10+ and/or the Linux mode; although it has worked with all CygWin and MinGW and Putty windows and mintty. o you should use "&lt;gt&gt;" and "&lt;lt&gt;" instead of "&gt;" and "&lt;" in a string processed by <a class="el" href="interfaceattr.html">attr(3f)</a> instead of in any plain text output so that the raw mode will create correct input for the <a class="el" href="interfaceattr.html">attr(3f)</a> function if read back in.</p>
<h2><a class="anchor" id="autotoc_md15"></a>
EXAMPLE</h2>
<pre class="fragment">Sample program

 program demo_esc
 use M_attr, only : attr, attr_mode, attr_update
    call printstuff('defaults')

    call attr_mode(manner='plain')
    call printstuff('plain:')

    call printstuff('raw:')

    call attr_mode(manner='color')
    call printstuff('')

    write(*,'(a)') attr('TEST ADDING A CUSTOM SEQUENCE:')
    call attr_update('blink',char(27)//'[5m')
    call attr_update('/blink',char(27)//'[38m')
    write(*,'(a)') attr('&lt;blink&gt;Items for Friday&lt;/blink&gt;')

 contains
 subroutine printstuff(label)
 character(len=*),intent(in) :: label
   call attr_mode(manner=label)
   write(*,'(a)') attr('TEST MANNER='//label)
   write(*,'(a)') attr('&lt;r&gt;RED&lt;/r&gt;,&lt;g&gt;GREEN&lt;/g&gt;,&lt;b&gt;BLUE&lt;/b&gt;')
   write(*,'(a)') attr('&lt;c&gt;CYAN&lt;/c&gt;,&lt;m&gt;MAGENTA&lt;/g&gt;,&lt;y&gt;YELLOW&lt;/y&gt;')
   write(*,'(a)') attr('&lt;w&gt;WHITE&lt;/w&gt; and &lt;e&gt;EBONY&lt;/e&gt;')

   write(*,'(a)') attr('Adding &lt;bo&gt;bold&lt;/bo&gt;')
   write(*,'(a)') attr('&lt;bo&gt;&lt;r&gt;RED&lt;/r&gt;,&lt;g&gt;GREEN&lt;/g&gt;,&lt;b&gt;BLUE&lt;/b&gt;&lt;/bo&gt;')
   write(*,'(a)') attr('&lt;bo&gt;&lt;c&gt;CYAN&lt;/c&gt;,&lt;m&gt;MAGENTA&lt;/g&gt;,&lt;y&gt;YELLOW&lt;/y&gt;&lt;/bo&gt;')
   write(*,'(a)') attr('&lt;bo&gt;&lt;w&gt;WHITE&lt;/w&gt; and &lt;e&gt;EBONY&lt;/e&gt;&lt;/bo&gt;')

   write(*,'(a)') attr('Adding &lt;ul&gt;underline&lt;/ul&gt;')
   write(*,'(a)') attr(&amp;
    &amp;'&lt;bo&gt;&lt;ul&gt;&lt;r&gt;RED&lt;/r&gt;,&lt;g&gt;GREEN&lt;/g&gt;,&lt;b&gt;BLUE&lt;/b&gt;&lt;/ul&gt;&lt;/bo&gt;')
   write(*,'(a)') attr(&amp;
    &amp;'&lt;bo&gt;&lt;ul&gt;&lt;c&gt;CYAN&lt;/c&gt;,&lt;m&gt;MAGENTA&lt;/g&gt;,&lt;y&gt;YELLOW&lt;/y&gt;&lt;/ul&gt;&lt;/bo&gt;')
   write(*,'(a)') attr('&lt;bo&gt;&lt;ul&gt;&lt;w&gt;WHITE&lt;/w&gt; and &lt;e&gt;EBONY&lt;/e&gt;&lt;/ul&gt;&lt;/bo&gt;')

   write(*,'(a)') attr('Adding &lt;ul&gt;italic&lt;/ul&gt;')
   write(*,'(a)') attr(&amp;
    &amp;'&lt;bo&gt;&lt;ul&gt;&lt;it&gt;&lt;r&gt;RED&lt;/r&gt;,&lt;g&gt;GREEN&lt;/g&gt;,&lt;b&gt;BLUE&lt;/b&gt;&lt;/it&gt;&lt;/ul&gt;&lt;/bo&gt;')
   write(*,'(a)') attr(&amp;
    &amp;'&lt;bo&gt;&lt;ul&gt;&lt;it&gt;&lt;c&gt;CYAN&lt;/c&gt;,&lt;m&gt;MAGENTA&lt;/g&gt;,&lt;y&gt;YELLOW&lt;/it&gt;&lt;/y&gt;&lt;/ul&gt;&lt;/bo&gt;')
   write(*,'(a)') attr('&lt;bo&gt;&lt;ul&gt;&lt;it&gt;&lt;w&gt;WHITE&lt;/w&gt; and &lt;e&gt;EBONY&lt;/e&gt;&lt;/ul&gt;&lt;/bo&gt;')

   write(*,'(a)') attr('Adding &lt;in&gt;inverse&lt;/in&gt;')
   write(*,'(a)') attr(&amp;
    &amp;'&lt;in&gt;&lt;bo&gt;&lt;ul&gt;&lt;it&gt;&lt;r&gt;RED&lt;/r&gt;,&lt;g&gt;GREEN&lt;/g&gt;,&amp;
    &amp;&lt;b&gt;BLUE&lt;/b&gt;&lt;/it&gt;&lt;/ul&gt;&lt;/bo&gt;&lt;/in&gt;')
   write(*,'(a)') attr(&amp;
    &amp;'&lt;in&gt;&lt;bo&gt;&lt;ul&gt;&lt;it&gt;&lt;c&gt;CYAN&lt;/c&gt;,&lt;m&gt;MAGENTA&lt;/g&gt;,&amp;
    &amp;&lt;y&gt;YELLOW&lt;/it&gt;&lt;/y&gt;&lt;/ul&gt;&lt;/bo&gt;&lt;/in&gt;')
   write(*,'(a)') attr(&amp;
    &amp;'&lt;in&gt;&lt;bo&gt;&lt;ul&gt;&lt;it&gt;&lt;w&gt;WHITE&lt;/w&gt; and &lt;e&gt;EBONY&lt;/e&gt;&lt;/ul&gt;&lt;/bo&gt;&lt;/in&gt;')
 end subroutine printstuff

 end program demo_esc
</pre><h2><a class="anchor" id="autotoc_md16"></a>
AUTHOR</h2>
<p>John S. Urban, 2020</p>
<h2><a class="anchor" id="autotoc_md17"></a>
LICENSE</h2>
<p>MIT</p>
<h2><a class="anchor" id="autotoc_md18"></a>
SEE ALSO</h2>
<p>attr_mode(3f), attr_update(3f) </p>

</div>
</div>
<hr/>The documentation for this interface was generated from the following file:<ul>
<li>/home/urbanjs/venus/V600/github/M_attr/src/<a class="el" href="M__attr_8f90.html">M_attr.f90</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
